# =============================================================================
# PULSERISE BACKEND APPLICATION CONFIGURATION
# =============================================================================

# Application Information
spring.application.name=pulserise-backend
spring.profiles.active=dev

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
server.port=8080
# server.servlet.context-path=/api

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Database Connection
#postgresql://postgres:NuygDEfoLtJoqlBMpFeFpCArHnZeTBRv@gondola.proxy.rlwy.net:49560/railway
spring.datasource.url=jdbc:postgresql://gondola.proxy.rlwy.net:49560/railway
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:NuygDEfoLtJoqlBMpFeFpCArHnZeTBRv}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.defer-datasource-initialization=true

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Configuration
app.jwt.secret=${JWT_SECRET:pulseriseSecretKeyForDevelopmentOnlyChangeInProduction}
app.jwt.expirationMs=86400000
app.jwt.refreshExpirationMs=604800000

# Password Encoding
spring.security.password.strength=10

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
app.cors.allowedOrigins=${ALLOWED_ORIGINS:http://localhost:3000,http://localhost:19006,exp://192.168.1.100:19000}
app.cors.allowedMethods=GET,POST,PUT,DELETE,OPTIONS,PATCH
app.cors.allowedHeaders=*
app.cors.allowCredentials=true
app.cors.maxAge=3600

# =============================================================================
# GROQ AI CONFIGURATION
# =============================================================================
# Chat Service API Key
groq.chat.api.key=${CHAT_API_KEY}
groq.chat.api.url=https://api.groq.com/openai/v1/chat/completions
groq.chat.api.model=llama3-8b-8192
groq.chat.api.timeout=30
groq.chat.api.maxTokens=1000
groq.chat.api.temperature=0.7

# Workout Recommendation Service API Key
groq.recommendation.api.key=${WORKOUT_RECOMMENDATION_API_KEY}
groq.recommendation.api.url=https://api.groq.com/openai/v1/chat/completions
groq.recommendation.api.model=llama3-8b-8192
groq.recommendation.api.timeout=30
groq.recommendation.api.maxTokens=1500
groq.recommendation.api.temperature=0.8

# Legacy configuration (for backward compatibility)
groq.api.key=${GROQ_API_KEY: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}
groq.api.url=https://api.groq.com/openai/v1/chat/completions
groq.api.model=llama3-8b-8192
groq.api.timeout=30
groq.api.maxTokens=1000
groq.api.temperature=0.7

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
logging.level.com.pulserise.pulserisebackend=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =============================================================================
# EMAIL CONFIGURATION (if needed for notifications)
# =============================================================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
spring.cache.type=simple
spring.cache.cache-names=users,workouts,recommendations

# =============================================================================
# VALIDATION CONFIGURATION
# =============================================================================
spring.validation.enabled=true

# =============================================================================
# INTERNATIONALIZATION
# =============================================================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.cache-duration=3600

# =============================================================================
# DEVELOPMENT SPECIFIC SETTINGS
# =============================================================================
# These will be overridden by application-dev.properties in development
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
